<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>íšŒì›ê°€ì…</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 font-sans">
    <main class="flex items-center justify-center min-h-screen p-4">
        <section class="w-full max-w-md bg-white p-6 rounded-xl shadow-lg">
            <div class="text-center mb-6">
                <div class="w-12 h-12 mx-auto mb-3 flex items-center justify-center rounded-full bg-blue-100">
                    <i class="bi bi-person-plus-fill text-blue-600 text-2xl"></i>
                </div>
                <h1 class="text-2xl font-semibold">ğŸ“ íšŒì›ê°€ì…</h1>
            </div>

            <form id="registerForm" class="space-y-4">
                <div>
                    <label for="username" class="block text-sm font-medium text-gray-700">ì‚¬ìš©ìëª…</label>
                    <input type="text" id="username" name="username" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div id="usernameError" class="text-red-600 text-sm mt-1 hidden"></div>
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">ì´ë©”ì¼</label>
                    <input type="email" id="email" name="email" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div id="emailError" class="text-red-600 text-sm mt-1 hidden"></div>
                </div>

                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="password" name="password" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div id="passwordError" class="text-red-600 text-sm mt-1 hidden"></div>
                </div>

                <div>
                    <label for="confirmPassword" class="block text-sm font-medium text-gray-700">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    <div id="confirmPasswordError" class="text-red-600 text-sm mt-1 hidden"></div>
                </div>

                <div class="form-group">
                    <input type="tel" class="form-control form-control-user" id="phoneNum" name="phoneNum" placeholder="010-0000-0000">
                    <div id="phoneNumError" class="text-red-600 text-sm mt-1 hidden"></div>
                </div>

                <div>
                    <label for="gender" class="block text-sm font-medium text-gray-700">ì„±ë³„</label>
                    <select id="gender" name="gender" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="male">ë‚¨ì„±</option>
                        <option value="female">ì—¬ì„±</option>
    
                    </select>
                    <div id="genderError" class="text-red-600 text-sm mt-1 hidden"></div>
                </div>

                <div>
                    <label for="birthYear" class="block text-sm font-medium text-gray-700">ì¶œìƒ ì—°ë„</label>
                    <select id="birthYear" name="birthYear" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
                        <option value="">ì¶œìƒ ì—°ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                    <div id="birthYearError" class="text-red-600 text-sm mt-1 hidden"></div>
                </div>

                <button type="submit" id="submitBtn"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition">
                    íšŒì›ê°€ì…
                </button>

                <p class="text-center text-sm text-gray-500 mt-4">
                    ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?
                    <a href="/login" class="text-blue-600 hover:underline font-medium">ë¡œê·¸ì¸</a>
                </p>
            </form>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('registerForm');

            const birthYearSelect = document.getElementById('birthYear');
            const currentYear = new Date().getFullYear();
            for (let year = currentYear; year >= 1900; year--) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = `${year}ë…„`;
                birthYearSelect.appendChild(option);
            }

            const phoneInput = document.getElementById("phoneNum");
            function isValidPhone(phone) {
                return /^\d{3}-\d{4}-\d{4}$/.test(phone);
            }

            phoneInput.addEventListener("input", () => {
                let value = phoneInput.value.replace(/[^\d]/g, "");
                if (value.length > 3 && value.length <= 7) {
                    phoneInput.value = value.slice(0, 3) + "-" + value.slice(3);
                } else if (value.length > 7) {
                    phoneInput.value = value.slice(0, 3) + "-" + value.slice(3, 7) + "-" + value.slice(7, 11);
                } else {
                    phoneInput.value = value;
                }
            });

            const validators = {
                username: value => /^[a-zA-Z0-9_]{4,20}$/.test(value),
                email: value => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value),
                password: value => /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(value),
                confirmPassword: (value, password) => value === password,
                gender: value => !!value,
                birthYear: value => !!value,
                phoneNum: value => isValidPhone(value)
            };

            form.addEventListener('submit', (e) => {
                e.preventDefault();

                const username = form.username.value;
                const email = form.email.value;
                const password = form.password.value;
                const confirmPassword = form.confirmPassword.value;
                const gender = form.gender.value;
                const birthYear = form.birthYear.value;
                const phoneNum = form.phoneNum.value;

                const errors = {
                    username: validators.username(username) ? '' : '4~20ìì˜ ì˜ë¬¸/ìˆ«ì/ì–¸ë”ìŠ¤ì½”ì–´ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.',
                    email: validators.email(email) ? '' : 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.',
                    password: validators.password(password) ? '' : 'ì˜ë¬¸ ëŒ€/ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ í¬í•¨í•´ 8ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.',
                    confirmPassword: validators.confirmPassword(confirmPassword, password) ? '' : 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',
                    gender: validators.gender(gender) ? '' : 'ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.',
                    birthYear: validators.birthYear(birthYear) ? '' : 'ì¶œìƒ ì—°ë„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.',
                    phoneNum: validators.phoneNum(phoneNum) ? '' : 'ì „í™”ë²ˆí˜¸ëŠ” 000-0000-0000 í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.'
                };

                let hasError = false;
                Object.keys(errors).forEach(key => {
                    const errorDiv = document.getElementById(`${key}Error`);
                    if (errorDiv) {
                        if (errors[key]) {
                            errorDiv.textContent = errors[key];
                            errorDiv.classList.remove('hidden');
                            hasError = true;
                        } else {
                            errorDiv.textContent = '';
                            errorDiv.classList.add('hidden');
                        }
                    }
                });

                if (!hasError) {
                    alert('íšŒì›ê°€ì… ì„±ê³µ! (ì„œë²„ ì—°ë™ ë¶€ë¶„ ì¶”ê°€ í•„ìš”)');
                    form.reset();
                }
            });
        });
    </script>
</body>

</html>
